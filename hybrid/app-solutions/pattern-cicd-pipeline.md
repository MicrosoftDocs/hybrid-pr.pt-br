---
title: O padrão DevOps no Azure Stack Hub
description: Saiba mais sobre o padrão DevOps para que você possa garantir a consistência entre implantações no Azure e no Azure Stack Hub.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: e26056a9507a7467473b009725d4f210d9d59ec8
ms.sourcegitcommit: d2def847937178f68177507be151df2aa8e25d53
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/20/2020
ms.locfileid: "86477228"
---
# <a name="devops-pattern"></a><span data-ttu-id="ca28b-103">Padrão DevOps</span><span class="sxs-lookup"><span data-stu-id="ca28b-103">DevOps pattern</span></span>

<span data-ttu-id="ca28b-104">Codifique a partir de um único local e implante em vários destinos em ambientes de desenvolvimento, teste e produção que estejam em seu datacenter local, em nuvens privadas ou na nuvem pública.</span><span class="sxs-lookup"><span data-stu-id="ca28b-104">Code from a single location and deploy to multiple targets in development, test, and production environments that may be in your local datacenter, private clouds, or the public cloud.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="ca28b-105">Contexto e problema</span><span class="sxs-lookup"><span data-stu-id="ca28b-105">Context and problem</span></span>

<span data-ttu-id="ca28b-106">A continuidade, a segurança e a confiabilidade da implantação de aplicativos são essenciais para as organizações e para as equipes de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="ca28b-106">Application deployment continuity, security, and reliability are essential to organizations and critical to development teams.</span></span>

<span data-ttu-id="ca28b-107">Geralmente, os aplicativos exigem código refatorado para serem executados em cada ambiente de destino.</span><span class="sxs-lookup"><span data-stu-id="ca28b-107">Apps often require refactored code to run in each target environment.</span></span> <span data-ttu-id="ca28b-108">Isso significa que um aplicativo não é totalmente portátil.</span><span class="sxs-lookup"><span data-stu-id="ca28b-108">This means that an app isn't completely portable.</span></span> <span data-ttu-id="ca28b-109">Ele deve ser atualizado, testado e validado à medida que passa por cada ambiente.</span><span class="sxs-lookup"><span data-stu-id="ca28b-109">It must be updated, tested, and validated as it moves through each environment.</span></span> <span data-ttu-id="ca28b-110">Por exemplo, o código escrito em um ambiente de desenvolvimento deve ser reescrito para funcionar em um ambiente de teste e reescrito mais uma vez quando finalmente chegar em um ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="ca28b-110">For example, code written in a development environment must then be rewritten to work in a test environment and rewritten when it finally lands in a production environment.</span></span> <span data-ttu-id="ca28b-111">Além disso, esse código estará especificamente vinculado ao host.</span><span class="sxs-lookup"><span data-stu-id="ca28b-111">Furthermore, this code is specifically tied to the host.</span></span> <span data-ttu-id="ca28b-112">Isso aumenta o custo e a complexidade de manutenção do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ca28b-112">This increases the cost and complexity of maintaining your app.</span></span> <span data-ttu-id="ca28b-113">Cada versão do aplicativo está vinculada a cada ambiente.</span><span class="sxs-lookup"><span data-stu-id="ca28b-113">Each version of the app is tied to each environment.</span></span> <span data-ttu-id="ca28b-114">O excesso de complexidade e duplicação aumenta o risco à segurança e à qualidade do código.</span><span class="sxs-lookup"><span data-stu-id="ca28b-114">The increased complexity and duplication increase the risk of security and code quality.</span></span> <span data-ttu-id="ca28b-115">O código também não poderá ser reimplantado prontamente quando você remover hosts com falha na restauração ou implantar hosts adicionais para lidar com aumentos na demanda.</span><span class="sxs-lookup"><span data-stu-id="ca28b-115">In addition, the code can't be readily redeployed when you remove restore failed hosts or deploy additional hosts to handle increases in demand.</span></span>

## <a name="solution"></a><span data-ttu-id="ca28b-116">Solução</span><span class="sxs-lookup"><span data-stu-id="ca28b-116">Solution</span></span>

<span data-ttu-id="ca28b-117">O padrão DevOps permite criar, testar e implantar um aplicativo para ser executado em várias nuvens.</span><span class="sxs-lookup"><span data-stu-id="ca28b-117">The DevOps Pattern enables you to build, test, and deploy an app that runs on multiple clouds.</span></span> <span data-ttu-id="ca28b-118">Esse padrão unifica as práticas de integração contínua e entrega contínua.</span><span class="sxs-lookup"><span data-stu-id="ca28b-118">This pattern unites the practice of continuous integration and continuous delivery.</span></span> <span data-ttu-id="ca28b-119">Na integração contínua, o código é criado e testado sempre que um membro da equipe confirma uma alteração no controle de versão.</span><span class="sxs-lookup"><span data-stu-id="ca28b-119">With continuous integration, code is built and tested every time a team member commits a change to version control.</span></span> <span data-ttu-id="ca28b-120">A entrega contínua automatiza cada etapa, desde a compilação até o ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="ca28b-120">Continuous delivery automates each step from a build to a production environment.</span></span> <span data-ttu-id="ca28b-121">Juntos, esses procedimentos criam um processo de liberação que dá suporte à implantação em diversos ambientes.</span><span class="sxs-lookup"><span data-stu-id="ca28b-121">Together, these processes create a release process that supports deployment across diverse environments.</span></span> <span data-ttu-id="ca28b-122">Com esse padrão, você pode rascunhar seu código e, em seguida, implantar o mesmo código em um ambiente local, em diferentes nuvens privadas e nas nuvens públicas.</span><span class="sxs-lookup"><span data-stu-id="ca28b-122">With this pattern, you can draft your code and then deploy the same code to a premise environment, different private clouds, and the public clouds.</span></span> <span data-ttu-id="ca28b-123">As diferenças no ambiente exigem uma alteração no arquivo de configuração em vez de alterações no código.</span><span class="sxs-lookup"><span data-stu-id="ca28b-123">Differences in environment require a change to a configuration file rather than changes to the code.</span></span>

![Padrão DevOps](media/pattern-cicd-pipeline/hybrid-ci-cd.png)

<span data-ttu-id="ca28b-125">Com um conjunto consistente de ferramentas de desenvolvimento em ambientes locais, de nuvem privada e de nuvem pública, você pode implementar uma prática de integração contínua e entrega contínua.</span><span class="sxs-lookup"><span data-stu-id="ca28b-125">With a consistent set of development tools across on-premises, private cloud, and public cloud environments, you can implement a practice of continuous integration and continuous delivery.</span></span> <span data-ttu-id="ca28b-126">Os aplicativos e serviços implantados usando o padrão DevOps são intercambiáveis e podem ser executados em qualquer ambiente, tirando proveito dos recursos e funcionalidades locais e de nuvem pública.</span><span class="sxs-lookup"><span data-stu-id="ca28b-126">Apps and services deployed using the DevOps Pattern are interchangeable and can run in any of these locations, taking advantage of on-premises and public cloud features and capabilities.</span></span>

<span data-ttu-id="ca28b-127">O uso de um pipeline de lançamento DevOps ajuda a:</span><span class="sxs-lookup"><span data-stu-id="ca28b-127">Using a DevOps release pipeline helps you:</span></span>

- <span data-ttu-id="ca28b-128">Iniciar uma nova compilação com base em confirmações de código em um único repositório.</span><span class="sxs-lookup"><span data-stu-id="ca28b-128">Initiate a new build based on code commits to a single repository.</span></span>
- <span data-ttu-id="ca28b-129">Implantar automaticamente o código recém-criado na nuvem pública para o teste de aceitação do usuário.</span><span class="sxs-lookup"><span data-stu-id="ca28b-129">Automatically deploy your newly built code to the public cloud for user acceptance testing.</span></span>
- <span data-ttu-id="ca28b-130">Fazer a implantação automática em uma nuvem privada depois que o código passa no teste.</span><span class="sxs-lookup"><span data-stu-id="ca28b-130">Automatically deploy to a private cloud once your code has passed testing.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="ca28b-131">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="ca28b-131">Issues and considerations</span></span>

<span data-ttu-id="ca28b-132">O padrão DevOps destina-se a garantir a consistência entre implantações, independentemente do ambiente de destino.</span><span class="sxs-lookup"><span data-stu-id="ca28b-132">The DevOps Pattern is intended to ensure consistency across deployments regardless of the target environment.</span></span> <span data-ttu-id="ca28b-133">No entanto, os recursos variam em ambientes de nuvem e locais.</span><span class="sxs-lookup"><span data-stu-id="ca28b-133">However, capabilities vary across cloud and on-premises environments.</span></span> <span data-ttu-id="ca28b-134">Considere os seguintes pontos:</span><span class="sxs-lookup"><span data-stu-id="ca28b-134">Consider the following points:</span></span>

- <span data-ttu-id="ca28b-135">As funções, os pontos de extremidade, os serviços e outros recursos de sua implantação estão disponíveis nos locais de destino?</span><span class="sxs-lookup"><span data-stu-id="ca28b-135">Are the functions, endpoints, services, and other resources in your deployment available in the target deployment locations?</span></span>
- <span data-ttu-id="ca28b-136">Os artefatos de configuração são armazenados em locais acessíveis entre nuvens?</span><span class="sxs-lookup"><span data-stu-id="ca28b-136">Are configuration artifacts stored in locations that are accessible across clouds?</span></span>
- <span data-ttu-id="ca28b-137">Os parâmetros de implantação funcionarão em todos os ambientes de destino?</span><span class="sxs-lookup"><span data-stu-id="ca28b-137">Will deployment parameters work in all the target environments?</span></span>
- <span data-ttu-id="ca28b-138">As propriedades específicas dos recursos estão disponíveis em todas as nuvens de destino?</span><span class="sxs-lookup"><span data-stu-id="ca28b-138">Are resource-specific properties available in all target clouds?</span></span>

<span data-ttu-id="ca28b-139">Para obter mais informações, confira [Desenvolva modelos do Azure Resource Manager para consistência de nuvem](/azure/azure-resource-manager/templates-cloud-consistency).</span><span class="sxs-lookup"><span data-stu-id="ca28b-139">For more information, see [Develop Azure Resource Manager templates for cloud consistency](/azure/azure-resource-manager/templates-cloud-consistency).</span></span>

<span data-ttu-id="ca28b-140">Além disso, os seguintes pontos devem ser considerados na decisão de como implementar esse padrão:</span><span class="sxs-lookup"><span data-stu-id="ca28b-140">In addition, consider the following points when deciding how to implement this pattern:</span></span>

### <a name="scalability"></a><span data-ttu-id="ca28b-141">Escalabilidade</span><span class="sxs-lookup"><span data-stu-id="ca28b-141">Scalability</span></span>

<span data-ttu-id="ca28b-142">Os sistemas de automação de implantação são o ponto de controle principal nos padrões DevOps.</span><span class="sxs-lookup"><span data-stu-id="ca28b-142">Deployment automation systems are the key control point in the DevOps Patterns.</span></span> <span data-ttu-id="ca28b-143">As Implementações podem variar.</span><span class="sxs-lookup"><span data-stu-id="ca28b-143">Implementations can vary.</span></span> <span data-ttu-id="ca28b-144">A seleção do tamanho de servidor correto depende do tamanho da carga de trabalho esperada.</span><span class="sxs-lookup"><span data-stu-id="ca28b-144">The selection of the correct server size depends on the size of the expected workload.</span></span> <span data-ttu-id="ca28b-145">Dimensionar VMs é mais oneroso do que dimensionar contêineres.</span><span class="sxs-lookup"><span data-stu-id="ca28b-145">VMs cost more to scale than containers.</span></span> <span data-ttu-id="ca28b-146">Para usar os contêineres para o dimensionamento, no entanto, o processo de compilação deve executar com os contêineres.</span><span class="sxs-lookup"><span data-stu-id="ca28b-146">To use containers for scaling, however, your build process must run with containers.</span></span>

### <a name="availability"></a><span data-ttu-id="ca28b-147">Disponibilidade</span><span class="sxs-lookup"><span data-stu-id="ca28b-147">Availability</span></span>

<span data-ttu-id="ca28b-148">Disponibilidade no contexto do DevPattern significa ser capaz de recuperar as informações de estado associadas ao fluxo de trabalho, como resultados de teste, dependências do código ou outros artefatos.</span><span class="sxs-lookup"><span data-stu-id="ca28b-148">Availability in the context of the DevPattern means being able to recover any state information associated with your workflow, such as test results, code dependencies, or other artifacts.</span></span> <span data-ttu-id="ca28b-149">Para avaliar seus requisitos de disponibilidade, considere duas métricas comuns:</span><span class="sxs-lookup"><span data-stu-id="ca28b-149">To assess your availability requirements, consider two common metrics:</span></span>

- <span data-ttu-id="ca28b-150">O RTO (Objetivo de Tempo de Recuperação) especifica quanto tempo você pode ficar sem um sistema.</span><span class="sxs-lookup"><span data-stu-id="ca28b-150">Recovery Time Objective (RTO) specifies how long you can go without a system.</span></span>

- <span data-ttu-id="ca28b-151">O RPO (Objetivo de Ponto de Recuperação) indica quantos dados você pode perder se uma interrupção no serviço afetar o sistema.</span><span class="sxs-lookup"><span data-stu-id="ca28b-151">Recovery Point Objective (RPO) indicates how much data you can afford to lose if a disruption in service affects the system.</span></span>

<span data-ttu-id="ca28b-152">Na prática, o RTO e o RPO representam a redundância e o backup.</span><span class="sxs-lookup"><span data-stu-id="ca28b-152">In practice, RTO, and RPO imply redundancy and backup.</span></span> <span data-ttu-id="ca28b-153">Na nuvem global do Azure, a disponibilidade não é uma questão de recuperação de hardware - que faz parte do Azure - mas sim de garantir que você mantenha o estado de seus sistemas DevOps.</span><span class="sxs-lookup"><span data-stu-id="ca28b-153">On the global Azure cloud, availability isn't a question of hardware recovery—that's part of Azure—but rather ensuring you maintain the state of your DevOps systems.</span></span> <span data-ttu-id="ca28b-154">No Azure Stack Hub, a recuperação de hardware pode ser uma consideração.</span><span class="sxs-lookup"><span data-stu-id="ca28b-154">On Azure Stack Hub, hardware recovery may be a consideration.</span></span>

<span data-ttu-id="ca28b-155">Outra consideração importante na criação do sistema usado para a automação da implantação é o controle de acesso e o gerenciamento adequado dos direitos necessários para a implantação de serviços em ambientes de nuvem.</span><span class="sxs-lookup"><span data-stu-id="ca28b-155">Another major consideration when designing the system used for deployment automation is access control and the proper management of the rights needed to deploy services to cloud environments.</span></span> <span data-ttu-id="ca28b-156">Que direitos são necessários para a criação, exclusão ou modificação de implantações?</span><span class="sxs-lookup"><span data-stu-id="ca28b-156">What rights are needed to create, delete, or modify deployments?</span></span> <span data-ttu-id="ca28b-157">Por exemplo, normalmente há um conjunto de direitos para a criação de um grupo de recursos no Azure e outro para a implantação de serviços no grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="ca28b-157">For example, one set of rights is typically required to create a resource group in Azure and another to deploy services in the resource group.</span></span>

### <a name="manageability"></a><span data-ttu-id="ca28b-158">Capacidade de gerenciamento</span><span class="sxs-lookup"><span data-stu-id="ca28b-158">Manageability</span></span>

<span data-ttu-id="ca28b-159">O design de qualquer sistema baseado no padrão DevOps deve considerar automação, registro em log e alertas para cada serviço de todo o portfólio.</span><span class="sxs-lookup"><span data-stu-id="ca28b-159">The design of any system based on the DevOps pattern must consider automation, logging, and alerting for each service across the portfolio.</span></span> <span data-ttu-id="ca28b-160">Use serviços compartilhados, uma equipe de aplicativos, ou ambos, e acompanhe também a governança e as políticas de segurança.</span><span class="sxs-lookup"><span data-stu-id="ca28b-160">Use shared services, an application team, or both, and track security policies and governance as well.</span></span>

<span data-ttu-id="ca28b-161">Implante ambientes de produção e ambientes de desenvolvimento/teste em grupos de recursos separados no Azure ou no Azure Stack Hub.</span><span class="sxs-lookup"><span data-stu-id="ca28b-161">Deploy production environments and development/test environments in separate resource groups on Azure or Azure Stack Hub.</span></span> <span data-ttu-id="ca28b-162">Assim, você poderá monitorar os recursos de cada ambiente e acumular os custos de cobrança por grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="ca28b-162">Then you can monitor each environment's resources and roll up billing costs by resource group.</span></span> <span data-ttu-id="ca28b-163">Também é possível excluir recursos como um conjunto, o que é útil para implantações de teste.</span><span class="sxs-lookup"><span data-stu-id="ca28b-163">You can also delete resources as a set, which is useful for test deployments.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="ca28b-164">Quando usar esse padrão</span><span class="sxs-lookup"><span data-stu-id="ca28b-164">When to use this pattern</span></span>

<span data-ttu-id="ca28b-165">Use esse padrão se:</span><span class="sxs-lookup"><span data-stu-id="ca28b-165">Use this pattern if:</span></span>

- <span data-ttu-id="ca28b-166">Puder desenvolver códigos em um ambiente que atenda às necessidades de seus desenvolvedores e para fazer a implantação em um ambiente específico para sua solução, onde seja difícil desenvolver um novo código.</span><span class="sxs-lookup"><span data-stu-id="ca28b-166">You can develop code in one environment that meets the needs of your developers, and deploy to an environment specific to your solution where it may be difficult to develop new code.</span></span>
- <span data-ttu-id="ca28b-167">Puder utilizar o código e as ferramentas que seus desenvolvedores desejam, contanto que eles possam seguir o processo de integração contínua e entrega contínua no padrão DevOps.</span><span class="sxs-lookup"><span data-stu-id="ca28b-167">You can use the code and tools your developers would like, as long as they're able to follow the continuous integration and continuous delivery process in the DevOps Pattern.</span></span>

<span data-ttu-id="ca28b-168">Este padrão não é recomendável:</span><span class="sxs-lookup"><span data-stu-id="ca28b-168">This pattern isn't recommended:</span></span>

- <span data-ttu-id="ca28b-169">Se você não puder automatizar a infraestrutura, o provisionamento de recursos, a configuração, a identidade e as tarefas de segurança.</span><span class="sxs-lookup"><span data-stu-id="ca28b-169">If you can't automate infrastructure, provisioning resources, configuration, identity, and security tasks.</span></span>
- <span data-ttu-id="ca28b-170">Se as equipes não tiverem acesso aos recursos de nuvem híbrida para implementar uma abordagem de CI/CD (integração contínua/desenvolvimento contínuo).</span><span class="sxs-lookup"><span data-stu-id="ca28b-170">If teams don't have access to hybrid cloud resources to implement a Continuous Integration/Continuous Development (CI/CD) approach.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ca28b-171">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="ca28b-171">Next steps</span></span>

<span data-ttu-id="ca28b-172">Para saber mais sobre os tópicos apresentados neste artigo:</span><span class="sxs-lookup"><span data-stu-id="ca28b-172">To learn more about topics introduced in this article:</span></span>

- <span data-ttu-id="ca28b-173">Confira a [documentação do Azure DevOps](/azure/devops) para se informar melhor sobre o Azure DevOps e as ferramentas relacionadas, incluindo o Azure Repos e o Azure Pipelines.</span><span class="sxs-lookup"><span data-stu-id="ca28b-173">See the [Azure DevOps documentation](/azure/devops) to learn more about Azure DevOps and related tools, including Azure Repos, and Azure Pipelines.</span></span>
- <span data-ttu-id="ca28b-174">Confira a [família de produtos e soluções do Azure Stack](/azure-stack) para se informar melhor sobre todo o portfólio de produtos e soluções.</span><span class="sxs-lookup"><span data-stu-id="ca28b-174">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="ca28b-175">Quando estiver pronto para testar o exemplo de solução, dê prosseguimento com o [guia de implantação de solução híbrida de CI/CD do DevOps](https://aka.ms/hybriddevopsdeploy).</span><span class="sxs-lookup"><span data-stu-id="ca28b-175">When you're ready to test the solution example, continue with the [DevOps hybrid CI/CD solution deployment guide](https://aka.ms/hybriddevopsdeploy).</span></span> <span data-ttu-id="ca28b-176">O guia de implantação fornece instruções passo a passo para a implantação e o teste de seus componentes.</span><span class="sxs-lookup"><span data-stu-id="ca28b-176">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span> <span data-ttu-id="ca28b-177">Você pode aprender a implantar um aplicativo no Azure e no Azure Stack Hub usando um pipeline híbrido de CI/CD (integração contínua/entrega contínua).</span><span class="sxs-lookup"><span data-stu-id="ca28b-177">You learn how to deploy an app to Azure and Azure Stack Hub using a hybrid continuous integration/continuous delivery (CI/CD) pipeline.</span></span>
